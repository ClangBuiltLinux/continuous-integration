language: cpp
compiler: gcc
script: ./driver.sh
os: linux
dist: trusty
sudo: required
addons:
  apt:
    packages:
      - binutils-aarch64-linux-gnu
      - binutils-arm-linux-gnueabi
      - expect-dev
      - ccache
cache: ccache
before_install:
  - sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
  - sudo add-apt-repository ppa:pietro-monteiro/qemu-backport -y
before_script:
  - curl https://apt.llvm.org/llvm-snapshot.gpg.key | sudo apt-key add -
  - echo "deb http://apt.llvm.org/trusty/ llvm-toolchain-trusty main" | sudo tee -a /etc/apt/sources.list
  - sudo apt-get update -qq
  - sudo apt-get install clang-8 qemu-system-arm -y
  - mkdir -p ccache
  - curl https://www.samba.org/ftp/ccache/ccache-3.5.tar.gz | tar -xzf - -C ccache --strip-components=1
  - cd ccache
  - ./configure
  - make -j$(nproc)
  - export PATH=${PWD}:${PATH}
  - cd "${OLDPWD}"
